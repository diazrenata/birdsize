---
title: "sim_community"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{sim_community}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(birdsize)
library(dplyr)
```

# Simulation from a BBS route

Load and preprocess data. The `new_hartford_raw` dataset is the 

```{r}

new_hartford_raw <- new_hartford_raw

new_hartford_clean <- new_hartford_raw %>%
  filter_bbs_survey() %>%
  dplyr::filter(year == 1994)

niceOutput(new_hartford_clean)
```


```{r}
set.seed(22)

new_hartford_sims <- community_generate(community_data_table = new_hartford_clean)

niceOutput(new_hartford_sims)
```

# Simulation given species' names

```{r}

new_hartford_names <- new_hartford_clean %>%
  left_join(select(sd_table, aou, genus, species)) %>%
  select(-aou) %>%
  mutate(genus = stringr::str_replace_all(genus, " ", ""),
         species = stringr::str_replace_all(species, " ", ""))

```

```{r}

new_hartford_names_sims <- community_generate(new_hartford_names)

```
